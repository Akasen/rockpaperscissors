<!doctype html>
<html>
<head>
  <title>Page Title</title>
</head>
<body>
  <script>

 	// Your JavaScript goes here!\
    function computerPlay() {

        let x = Math.floor((Math.random()*3)+1)
        let choice = ""

        if(x == 1) {
          choice = "rock"
        }
        if(x == 2) {
          choice = "paper"
        }
        if(x == 3) {
          choice = "scissor"
        }
        return choice
    }

    function playRound(playerSelection, computerSelection) {

      let winner

      // Inital check for if the player and the computer chose the same choice
      // This is probably, so far as I know the most effective way of handling
      // a draw. If a draw is the first thing to happen, all other code doesn't
      // need to be checked and it goes straight to the end of the function

      if(playerSelection == computerSelection) {
        console.log("IT'S A DRAW!")
      }

      // Win-Lose conditions
      // Personally, I am highly perturbed by the amount of if-statements
      // in this else-block. DRY concepts tell me that there is a much simpler
      // way of going about this, but I fail to think of anything.
      // Is this because the rules of a game as simple as RPS requires very
      // specific instructions for all possible actions?

      else {
          if(playerSelection == "rock") {

            if(computerSelection == "paper") {
              console.log("You Lose! Paper beats Rocks!")
              winner = 0
            }
            else {
              console.log("You Win! Rock beats Scissors!")
              winner = 1
            }
            // ---------------------
            // ---END IF-STATEMENT--
            // ---------------------
            }

          if((playerSelection == "scissor") || (playerSelection == "scissors")) {

            if(computerSelection == "rock") {
              console.log("You Lose! Rock beats Scissors!")
              winner = 0
            }

            else {
              console.log("You Win! Paper beats Scissors!")
              winner = 1
            }
            // ---------------------
            // --END IF-STATEMENT--
            // ---------------------
          }

          if(playerSelection == "paper") {

            if(computerSelection == "scissor") {
              console.log("You Lose! Scissors beats Paper!")
              winner = 0
            }

            else {
              console.log("You Win! Rock beats Scissors!")
              winner = 1
            }
            // ---------------------
            // --END IF-STATEMENT--
            // ---------------------
          }
        }

        // End of function
        // Return result
        return winner
    }

    function checkWinner(player, computer) {

      let FinalWinner

      if(player > computer) {
        console.log("You won against the computer!")
      }
      else {
        console.log("The computer wins!")
      }


      // ---------------------
      // ----END FUNCTION-----
      // ---------------------
      return 0
    }

    function playerChoice() {

      // This function checks to make sure the player input is a valid
      // choice.

      let playerPrompt

      function getChoice() {
        while(playerPrompt != "rock" && playerPrompt != "paper" &&
                playerPrompt != "scissors" && playerPrompt != "scissor") {

        playerPrompt = prompt("Decide a gesture").toLowerCase()

        if(playerPrompt != "rock" && playerPrompt != "paper" &&
                playerPrompt != "scissors" && playerPrompt != "scissor") {
                  playerPrompt = prompt("Not a valid input").toLowerCase()
                }

        }

        //-----------------
        //end of getChoice
        //-----------------
        return playerPrompt
      }

      return getChoice()
    }

    function game() {

      let playerWin = 0
      let computerWin = 0

      for(i=0; i<5; i++) {

        // Initialize variables
        // Get player and computer actions

        let winner

        const playerSelection = playerChoice()
        const computerSelection = computerPlay()

        winner = playRound(playerSelection, computerSelection)
        if(winner == 1) {
          playerWin++
        }
        else {
          computerWin++
        }

        // ---------------------
        //  -- END FOR-LOOP --
        // ---------------------
        }

        checkWinner(playerWin, computerWin)

    }

    // Begin game
    game()

  </script>
</body>
</html>
